<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Google Maps JavaScript API v3 Example: Marker Animations</title>
    <link href="/maps/documentation/javascript/examples/default.css" rel="stylesheet">
    <script src="https://maps.googleapis.com/maps/api/js?sensor=false"></script>
    <script>
        var centerPoint = new google.maps.LatLng(24.217712, 120.580806);
        var marker;
        var map;
        var image = 'cabs.png';
        var interval;
        var b = false;
        var markers = [];
        var myLocationMarker;
        function setAllMap(map) {
            for (var i = 0; i < markers.length; i++) {
                markers[i].setMap(map);
            }
        }

        function clearMarkers() {
            setAllMap(null);
        }

        function mark(lat, log) {
            var m = new google.maps.LatLng(lat, log);

            clearMarkers();
            markers = [];

            marker = new google.maps.Marker
            ({
                map: map,
                draggable: true,
                position: m,
                icon: {
                    path: google.maps.SymbolPath.CIRCLE,
                    fillColor: '#0099FF',
                    fillOpacity: 1,
                    strokeColor: '#00CCFF',
                    strokeWeight: 5,
                    scale: 6
                }

            });

            markers.push(marker);
        }

        function initialize() {

            var mapOptions =
            {
                zoom: 15,
                mapTypeId: google.maps.MapTypeId.ROADMAP,
                center: centerPoint
            };

            map = new google.maps.Map(document.getElementById('map_canvas'),
                    mapOptions);

            updateTrafficOnMap(map, null, 1);

            interval = window.setInterval(function () {
                if (marker.getVisible()) {
                    marker.setVisible(false);
                }
                else {
                    marker.setVisible(true);
                }
            }, 1000);

        }
        0
        function centerAt(latitude, longitude) {
            myLatlng = new google.maps.LatLng(latitude, longitude);
            map.panTo(myLatlng);
            mark(latitude, longitude);
        }

        function updateTrafficOnMap(map, trafficLayer, on) {
            if (on == 0) {
                trafficLayer.setMap(null);
                setTimeout(function () { updateTrafficOnMap(map, null, 1) }, 1)
            }

            if (on == 1) {
                var trafficLayer2 = new google.maps.TrafficLayer();
                trafficLayer2.setMap(map);
                // after 300ms (or 5 minutes) update the traffic map
                setTimeout(function () { updateTrafficOnMap(map, trafficLayer2, 0) }, 300000)
            }
        }

        google.maps.event.addDomListener(window, 'load', initialize);
    </script>
</head>
<body>
    <div id="map_canvas" style="width: device-width; height: 600px;">map div</div>
</body>
</html>